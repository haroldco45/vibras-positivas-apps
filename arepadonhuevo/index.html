<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arepa Don Huevo - Men√∫ Digital</title>
    <style>
        :root { --naranja: #e67e22; --amarillo: #f1c40f; --cafe: #5d4037; --blanco: #ffffff; --fondo: #fef9e7; --exito: #25D366; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--fondo); margin: 0; padding: 10px; padding-bottom: 200px; color: var(--cafe); }
        
        #bloqueo { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #fff; z-index: 9999; text-align: center; padding-top: 100px; }

        header { background: var(--cafe); color: var(--amarillo); padding: 20px; text-align: center; border-radius: 0 0 30px 30px; border-bottom: 5px solid var(--naranja); margin: -10px -10px 20px -10px; }
        .logo-img { width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--amarillo); background: white; margin-bottom: 10px; object-fit: contain; }

        .card-datos { background: white; padding: 15px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; border: 1px solid var(--naranja); }
        .input-cajon { width: 100%; padding: 12px; margin: 6px 0; border: 1px solid #ddd; border-radius: 12px; font-size: 15px; box-sizing: border-box; outline: none; }
        
        .section-title { font-size: 13px; font-weight: bold; color: var(--naranja); text-transform: uppercase; margin: 25px 0 10px; border-left: 5px solid var(--cafe); padding-left: 10px; }

        .card-prod { background: white; border-radius: 20px; display: flex; align-items: center; padding: 12px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #f9ebea; }
        .img-prod { width: 90px; height: 90px; border-radius: 15px; object-fit: cover; margin-right: 15px; background: #eee; border: 1px solid #ddd; }
        .info-prod { flex-grow: 1; }
        .info-prod h3 { margin: 0; font-size: 15px; color: var(--cafe); text-transform: uppercase; }
        .info-prod b { color: var(--naranja); font-size: 16px; display: block; margin: 4px 0; }

        .controles { display: flex; align-items: center; gap: 12px; }
        .btn-c { background: var(--amarillo); color: var(--cafe); border: none; width: 35px; height: 35px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 20px; }
        .cant-n { font-weight: bold; color: var(--cafe); font-size: 20px; min-width: 25px; text-align: center; }

        .footer-total { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 15px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); border-radius: 30px 30px 0 0; z-index: 1000; }
        .cajon-cuenta { background: var(--cafe); color: var(--amarillo); padding: 12px; border-radius: 15px; text-align: center; margin-bottom: 10px; border: 1px solid var(--naranja); }
        .cajon-cuenta span { font-size: 26px; font-weight: bold; }
        .btn-enviar { background: var(--exito); color: white; border: none; padding: 18px; border-radius: 15px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; }

        .hidden { display: none !important; }
        footer { text-align: center; padding: 25px; font-size: 12px; color: #888; background: #fff; border-top: 1px solid #eee; line-height: 1.6; }
    </style>
</head>
<body>

<div id="bloqueo"><h1>üîí</h1><h2>SERVICIO SUSPENDIDO</h2><p>Contacte a VIBRAS POSITIVAS</p></div>

<div id="app-content">
    <header>
        <img src="arepadonhuevo.png" alt="Logo" class="logo-img">
        <h1 style="margin:0; font-size: 22px;">AREPA DON HUEVO</h1>
        <small>üìç Calle 27, Caucasia Antioquia</small>
    </header>

    <div class="card-datos">
        <div id="form-datos">
            <div class="section-title">Datos del Cliente</div>
            <input type="text" id="nom" class="input-cajon" placeholder="üë§ Nombre Completo">
            <input type="text" id="dir" class="input-cajon" placeholder="üè† Direcci√≥n: Calle 27 #...">
            <input type="tel" id="tel" class="input-cajon" placeholder="üìû WhatsApp">
            <button class="btn-enviar" style="background: var(--naranja); margin-top: 10px;" onclick="guardarDatos()">üíæ GUARDAR MIS DATOS</button>
        </div>
        <div id="datos-listos" class="hidden">
            <p id="resumen-datos" style="margin:0; font-size: 14px; color: #555; white-space: pre-line; font-weight: bold;"></p>
            <button onclick="editarDatos()" style="background: none; border: none; color: var(--naranja); cursor: pointer; padding: 5px 0; font-size: 12px; text-decoration: underline;">‚úèÔ∏è Cambiar informaci√≥n</button>
        </div>
    </div>

    <div class="section-title">Arepas Fritas y de Choclo</div>
    <div id="menu-arepas"></div>

    <div class="section-title">Bebidas y Fr√≠os</div>
    <div id="menu-bebidas"></div>

    <div class="card-datos" style="margin-top:20px;">
        <div class="section-title">Forma de Pago</div>
        <select id="pago" class="input-cajon">
            <option value="Efectivo">Efectivo</option>
            <option value="Nequi">Nequi</option>
            <option value="Bancolombia">Bancolombia</option>
        </select>
        <textarea id="obs" class="input-cajon" placeholder="üìù ¬øAlguna nota para el pedido?" rows="2"></textarea>
    </div>

    <div class="footer-total">
        <div class="cajon-cuenta">
            <small>VALOR DE TU CUENTA</small><br>
            <span id="total-vista">$ 0</span>
        </div>
        <button class="btn-enviar" onclick="enviarPedido()">üöÄ ENVIAR PEDIDO POR WHATSAPP</button>
    </div>

    <footer>
        App desarrollada por <br>
        <span style="font-weight: bold; color: #5d4037;">VIBRAS POSITIVAS</span> <br>
        Derechos de Autor ¬© 2026
    </footer>
</div>

<script>
    const WA_DONHUEVO = "573167232308";
    
    // PRODUCTOS CON NOMBRES EXACTOS DE GITHUB
    const productos = [
        { id: 1, n: "Arepa de Huevo", p: 4500, f: "arepadehuevo.JPG", cat: "arepa" },
        { id: 2, n: "Arepa Trif√°sica", p: 9000, f: "arepatrifasica.JPG", cat: "arepa" },
        { id: 3, n: "Arepa de Choclo", p: 10000, f: "arepadechoclo.jpeg", cat: "arepa" },
        { id: 4, n: "Arepa de Queso", p: 7000, f: "arepadequeso.JPG", cat: "arepa" },
        { id: 5, n: "Avena Fr√≠a", p: 5000, f: "avenafria.JPG", cat: "bebida" },
        { id: 6, n: "Guarapo Fr√≠o", p: 5000, f: "guarapo.JPG", cat: "bebida" },
        { id: 7, n: "Jugo de Tamarindo", p: 5000, f: "jugotamarindo.JPG", cat: "bebida" },
        { id: 8, n: "Coca Cola Mediana", p: 3000, f: "cocacolamediana.JPG", cat: "bebida" },
        { id: 9, n: "Coca Cola Personal", p: 4500, f: "cocacolapersonal.JPG", cat: "bebida" },
        { id: 10, n: "Coca Cola Litro y Cuarto", p: 6500, f: "cocacolalitroycuarto.JPG", cat: "bebida" }
    ];

    let ped = {};

    function render() {
        productos.forEach(p => {
            const div = document.createElement('div');
            div.className = 'card-prod';
            div.innerHTML = `
                <img src="${p.f}" class="img-prod" alt="${p.n}" onerror="this.src='https://via.placeholder.com/90?text=Arepa'">
                <div class="info-prod">
                    <h3>${p.n}</h3>
                    <b>$${p.p.toLocaleString()}</b>
                    <div class="controles">
                        <button class="btn-c" onclick="cant(${p.id},-1)">-</button>
                        <span id="q-${p.id}" class="cant-n">0</span>
                        <button class="btn-c" onclick="cant(${p.id},1)">+</button>
                    </div>
                </div>`;
            document.getElementById(p.cat === 'arepa' ? 'menu-arepas' : 'menu-bebidas').appendChild(div);
        });
    }
    render();

    function cant(id, v) {
        ped[id] = Math.max(0, (ped[id] || 0) + v);
        document.getElementById(`q-${id}`).innerText = ped[id];
        let t = 0;
        for(let x in ped) { const prod = productos.find(y => y.id == x); t += (ped[x] * prod.p); }
        document.getElementById('total-vista').innerText = `$ ${t.toLocaleString()}`;
    }

    function guardarDatos() {
        const d = { n: document.getElementById('nom').value, d: document.getElementById('dir').value, t: document.getElementById('tel').value };
        if(d.n && d.d && d.t) { localStorage.setItem('vp_donhuevo_datos', JSON.stringify(d)); mostrarDatos(); }
        else { alert("Socio, por favor completa tus datos."); }
    }

    function mostrarDatos() {
        const g = JSON.parse(localStorage.getItem('vp_donhuevo_datos'));
        if(g) {
            document.getElementById('form-datos').classList.add('hidden');
            document.getElementById('datos-listos').classList.remove('hidden');
            document.getElementById('resumen-datos').innerText = `üë§ ${g.n}\nüè† ${g.d}\nüìû ${g.t}`;
        }
    }
    window.onload = () => { mostrarDatos(); checkLock(); };

    function editarDatos() { document.getElementById('form-datos').classList.remove('hidden'); document.getElementById('datos-listos').classList.add('hidden'); }

    async function checkLock() {
        try {
            const res = await fetch('https://haroldco45.github.io/control-vibras.js');
            const t = await res.text();
            if(t.includes('"arepa-don-huevo": "suspendido"')) {
                document.getElementById('bloqueo').style.display = 'block';
                document.getElementById('app-content').style.display = 'none';
            }
        } catch(e){}
    }

    function enviarPedido() {
        const c = JSON.parse(localStorage.getItem('vp_donhuevo_datos'));
        if(!c) return alert("Socio, guarda tus datos primero.");
        let factura = ""; let total = 0;
        for(let id in ped) if(ped[id]) {
            const p = productos.find(x => x.id == id);
            const sub = ped[id] * p.p;
            total += sub;
            factura += `${ped[id]}x ${p.n} ($${p.p.toLocaleString()}) = *$${sub.toLocaleString()}*\n`;
        }
        if(!factura) return alert("¬°Agrega al menos una arepa!");

        navigator.geolocation.getCurrentPosition(pos => {
            const gps = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
            lanzar(c, factura, total, gps);
        }, () => lanzar(c, factura, total, "No enviada"), { timeout: 4000 });
    }

    function lanzar(c, factura, total, gps) {
        let msg = `*üç≥ AREPA DON HUEVO - PEDIDO*\n--------------------------\nüë§ *CLIENTE:* ${c.n}\nüè† *DIR:* ${c.d}\nüìû *CEL:* ${c.t}\nüí≥ *PAGO:* ${document.getElementById('pago').value}\n--------------------------\nüõí *FACTURA DE PEDIDO:*\n${factura}--------------------------\nüí∞ *TOTAL A PAGAR: $${total.toLocaleString()}*\nüìù *OBS:* ${document.getElementById('obs').value || "N/A"}\nüìç *MAPS:* ${gps}\n\n_App desarrollada por Vibras Positivas_`;
        window.location.href = `https://wa.me/${WA_DONHUEVO}?text=${encodeURIComponent(msg)}`;
    }
</script>
</body>
</html>
