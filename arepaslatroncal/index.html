<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Arepas La Troncal - Pedidos</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ffcc00; --secondary: #e67e22; --dark: #2c3e50; --light: #ecf0f1; --success: #27ae60; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background: var(--light); color: var(--dark); min-height: 100vh; }

        header { background: var(--primary); padding: 20px; text-align: center; border-bottom: 5px solid var(--secondary); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        header h1 { font-size: 1.5rem; color: var(--dark); text-transform: uppercase; letter-spacing: 1px; }

        .container { padding: 15px; max-width: 500px; margin: 0 auto; padding-bottom: 100px; }
        
        /* Estilo de los Productos */
        .product-card { background: white; border-radius: 20px; padding: 15px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 15px; border-left: 8px solid var(--primary); }
        .product-info { flex-grow: 1; }
        .product-info h3 { font-size: 1.1rem; margin-bottom: 5px; }
        .product-price { color: var(--secondary); font-weight: bold; font-size: 1.2rem; }
        
        .quantity-control { display: flex; align-items: center; gap: 10px; background: var(--light); padding: 5px 10px; border-radius: 12px; }
        .btn-qty { background: white; border: none; width: 30px; height: 30px; border-radius: 8px; font-weight: bold; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .qty-num { font-weight: bold; min-width: 20px; text-align: center; }

        /* Bot√≥n de WhatsApp Flotante */
        .btn-whatsapp { position: fixed; bottom: 20px; left: 20px; right: 20px; background: var(--success); color: white; border: none; padding: 18px; border-radius: 15px; font-size: 1.1rem; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3); cursor: pointer; z-index: 100; }

        /* Panel Admin */
        .admin-section { margin-top: 30px; padding: 20px; background: #fff; border-radius: 20px; border: 2px dashed #ccc; }
        .admin-section h2 { font-size: 1rem; margin-bottom: 15px; text-align: center; color: #7f8c8d; }
        input { width: 100%; padding: 12px; margin-bottom: 10px; border: 2px solid var(--light); border-radius: 10px; outline: none; font-family: inherit; }
        .btn-add { width: 100%; padding: 12px; background: var(--dark); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        
        .hidden { display: none; }
        .badge { background: var(--secondary); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; }
    </style>
</head>
<body>

    <header>
        <h1>Arepas La Troncal üåΩ</h1>
        <p style="font-size: 0.8rem;">¬°Sabor tradicional en tu mesa!</p>
    </header>

    <div class="container">
        <div id="menu-list">
            </div>

        <button id="toggle-admin" style="background: none; border: none; color: #999; font-size: 0.7rem; width: 100%; margin-top: 20px;">‚öôÔ∏è GESTIONAR MEN√ö</button>

        <div id="admin-panel" class="admin-section hidden">
            <h2>Agregar Nuevo Producto</h2>
            <input type="text" id="new-name" placeholder="Nombre (Ej: Arepa de Queso)">
            <input type="number" id="new-price" placeholder="Precio (Ej: 3000)">
            <button class="btn-add" onclick="addProduct()">‚ûï AGREGAR AL MEN√ö</button>
        </div>
    </div>

    <button class="btn-whatsapp" onclick="sendOrder()">
        <span>üõí ENVIAR PEDIDO POR WHATSAPP</span>
    </button>

    <script>
        const WS_NUMBER = "573122493344"; // WhatsApp de Arepas La Troncal
        let menu = JSON.parse(localStorage.getItem('troncal_menu')) || [
            { id: 1, name: "Arepa de Ma√≠z Blanco", price: 2500, qty: 0 }
        ];

        function renderMenu() {
            const list = document.getElementById('menu-list');
            list.innerHTML = "";
            
            menu.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = "product-card";
                card.innerHTML = `
                    <div class="product-info">
                        <h3>${item.name}</h3>
                        <div class="product-price">$${item.price.toLocaleString()}</div>
                    </div>
                    <div class="quantity-control">
                        <button class="btn-qty" onclick="updateQty(${index}, -1)">-</button>
                        <span class="qty-num">${item.qty || 0}</span>
                        <button class="btn-qty" onclick="updateQty(${index}, 1)">+</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function updateQty(index, change) {
            menu[index].qty = Math.max(0, (menu[index].qty || 0) + change);
            renderMenu();
        }

        function addProduct() {
            const name = document.getElementById('new-name').value;
            const price = parseInt(document.getElementById('new-price').value);

            if (name && price) {
                menu.push({ id: Date.now(), name: name, price: price, qty: 0 });
                localStorage.setItem('troncal_menu', JSON.stringify(menu));
                renderMenu();
                document.getElementById('new-name').value = "";
                document.getElementById('new-price').value = "";
                alert("‚úÖ Producto agregado con √©xito");
            } else {
                alert("Por favor completa los datos");
            }
        }

        function sendOrder() {
            const itemsOrdered = menu.filter(item => item.qty > 0);
            
            if (itemsOrdered.length === 0) {
                alert("Selecciona al menos una arepa para tu pedido üòä");
                return;
            }

            let message = "¬°Hola Arepas La Troncal! üåΩ Quiero hacer un pedido:%0A%0A";
            let total = 0;

            itemsOrdered.forEach(item => {
                const subtotal = item.qty * item.price;
                message += `‚Ä¢ ${item.qty} x ${item.name} ($${subtotal.toLocaleString()})%0A`;
                total += subtotal;
            });

            message += `%0Aüí∞ *TOTAL A PAGAR: $${total.toLocaleString()}*%0A%0Aüìç Por favor conf√≠rmame el pedido para enviarte mi direcci√≥n.`;
            
            window.open(`https://wa.me/${WS_NUMBER}?text=${message}`, '_blank');
        }

        // Toggle para el panel administrativo
        document.getElementById('toggle-admin').onclick = function() {
            const panel = document.getElementById('admin-panel');
            const pass = panel.classList.contains('hidden') ? prompt("Clave de acceso:") : null;
            if (pass === "vibras" || !panel.classList.contains('hidden')) {
                panel.classList.toggle('hidden');
            } else if (pass !== null) {
                alert("Clave incorrecta");
            }
        };

        renderMenu();
    </script>
</body>
</html>
