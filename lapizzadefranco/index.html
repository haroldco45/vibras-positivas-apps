<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Pizza de Franco - Pedidos Online</title>
    <style>
        :root { --rojo: #ce2b37; --verde: #008c45; --blanco: #ffffff; --beige: #fdfaf5; --oscuro: #1a1a1a; --exito: #25D366; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--beige); margin: 0; padding: 10px; padding-bottom: 160px; }
        
        #bloqueo { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #fff; z-index: 9999; text-align: center; padding-top: 100px; }
        
        /* HEADER CORREGIDO PARA EL LOGO */
        header { background: var(--rojo); color: white; padding: 25px 20px; text-align: center; border-radius: 0 0 30px 30px; margin: -10px -10px 15px -10px; border-bottom: 5px solid var(--verde); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .logo-pizza { width: 120px; height: auto; max-height: 120px; border-radius: 15px; border: 3px solid white; background: white; margin-bottom: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }

        .search-input { width: 100%; padding: 15px; border-radius: 50px; border: 2px solid var(--rojo); outline: none; margin-bottom: 15px; box-sizing: border-box; }
        .card-datos { background: white; padding: 20px; border-radius: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; border: 2px solid var(--verde); }
        .input-cajon { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 12px; box-sizing: border-box; font-size: 16px; }
        
        .section-title { font-size: 13px; font-weight: bold; color: var(--rojo); text-transform: uppercase; margin: 25px 0 10px; border-left: 5px solid var(--verde); padding: 8px; background: white; border-radius: 0 10px 10px 0; text-align: left; }
        .card-prod { background: white; padding: 15px; border-radius: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 12px; border-bottom: 4px solid var(--rojo); }
        .info-prod h3 { margin: 0; font-size: 15px; color: var(--oscuro); text-transform: uppercase; text-align: left; }
        
        .selector-tamano { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 10px; }
        .btn-tamano { background: #f8f8f8; border: 1px solid #ddd; padding: 8px 2px; border-radius: 10px; font-size: 9px; cursor: pointer; display: flex; flex-direction: column; align-items: center; }
        .btn-tamano.active { background: var(--verde); color: white; border-color: var(--verde); }
        .btn-tamano b { font-size: 10px; }

        .controles { display: flex; align-items: center; justify-content: center; gap: 20px; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; }
        .btn-c { background: var(--oscuro); color: white; border: none; width: 35px; height: 35px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .cant-n { font-weight: bold; color: var(--rojo); font-size: 18px; }
        
        .footer-pedido { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 15px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); border-radius: 25px 25px 0 0; z-index: 1000; }
        .btn-enviar { background: var(--exito); color: white; border: none; padding: 18px; border-radius: 15px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; }
        footer { text-align: center; padding: 20px; font-size: 11px; color: #999; }
    </style>
</head>
<body>

<div id="bloqueo"><h1>üîí</h1><h2>SERVICIO SUSPENDIDO</h2><p>Contacte a VIBRAS POSITIVAS</p></div>

<div id="app-content">
    <header>
        <img src="lapizzadefranco.PNG" alt="La Pizza de Franco Logo" class="logo-pizza">
        <h1 style="margin:0; font-size: 22px;">LA PIZZA DE FRANCO</h1>
        <small>Carrera 22, Colinas del Portal - Caucasia</small>
    </header>
    
    <input type="text" id="lupa" class="search-input" placeholder="üîç Buscar pizza..." onkeyup="buscar()">
    
    <div class="card-datos">
        <div class="section-title">üìç Datos de Entrega</div>
        <input type="text" id="nom" class="input-cajon" placeholder="üë§ Nombre Completo">
        <input type="text" id="dir" class="input-cajon" placeholder="üè† Direcci√≥n Exacta">
        <input type="tel" id="tel_cli" class="input-cajon" placeholder="üìû Celular">
        <select id="pago" class="input-cajon">
            <option value="Efectivo">Efectivo</option>
            <option value="Nequi">Nequi</option>
            <option value="Bancolombia">Bancolombia</option>
        </select>
        <textarea id="obs" class="input-cajon" placeholder="üìù Notas (ej: sin cebolla, vueltas de 50...)"></textarea>
    </div>

    <div id="menu"></div>

    <div class="footer-pedido">
        <div style="display:flex; justify-content:space-between; margin-bottom:12px; font-weight:bold; font-size: 18px;">
            <span>TOTAL:</span><span id="total-vista" style="color: var(--verde);">$ 0</span>
        </div>
        <button class="btn-enviar" onclick="enviar()">üöÄ ENVIAR PEDIDO POR WHATSAPP</button>
    </div>

    <footer><b>ASETEC HM ¬© 2026</b><br>Infraestructura Digital VIBRAS POSITIVAS</footer>
</div>

<script>
    const WA_FRANCO = "573242233812";
    
    const carta = [
        { cat: "üçï Las Especiales de Franco", prods: [
            { id: 1, n: "Franco Especial", p: { per: 44000, med: 78000, fam: 152000 } },
            { id: 2, n: "Carbonara Casa", p: { per: 30000, med: 40000, fam: 72000 } },
            { id: 3, n: "Llanera", p: { per: 36000, med: 56000, fam: 84000 } },
            { id: 4, n: "Marinera (Mariscos)", p: { per: 37000, med: 57000, fam: 98000 } },
            { id: 5, n: "Serrano y Champi√±√≥n", p: { per: 34000, med: 44000, fam: 77000 } }
        ]},
        { cat: "üçï Tradicionales", prods: [
            { id: 8, n: "Hawaiana", p: { per: 27000, med: 37000, fam: 78000 } },
            { id: 9, n: "Pepperoni", p: { per: 34000, med: 46000, fam: 82000 } },
            { id: 10, n: "Mexicana / Ranchera", p: { per: 32000, med: 42000, fam: 77000 } },
            { id: 11, n: "Margarita", p: { per: 28000, med: 38000, fam: 75000 } },
            { id: 12, n: "Napolitana", p: { per: 22000, med: 32000, fam: 62000 } },
            { id: 13, n: "Jam√≥n y Queso", p: { per: 25000, med: 35000, fam: 68000 } }
        ]},
        { cat: "ü•ò Lasag√±as", prods: [
            { id: 21, n: "Lasag√±a Pollo", p: { per: 32000, med: 36000 } },
            { id: 22, n: "Lasag√±a Mixta", p: { per: 34000, med: 38000 } },
            { id: 23, n: "Lasag√±a Bolog√±esa", p: { per: 32000, med: 36000 } }
        ]}
    ];

    let ped = {}; let sel = {};

    function render() {
        const m = document.getElementById('menu');
        carta.forEach(s => {
            const t = document.createElement('div'); t.className='section-title'; t.innerText=s.cat; m.appendChild(t);
            s.prods.forEach(p => {
                const c = document.createElement('div'); c.className='card-prod';
                let btns = "";
                for (let tam in p.p) {
                    let txt = tam === 'per' ? 'Pers.' : tam === 'med' ? 'Med.' : 'Fam.';
                    btns += `<button class="btn-tamano" id="t-${p.id}-${tam}" onclick="setT(${p.id}, '${tam}', ${p.p[tam]})">${txt}<b>$${p.p[tam].toLocaleString()}</b></button>`;
                }
                c.innerHTML = `<div class="info-prod"><h3>${p.n}</h3></div><div class="selector-tamano">${btns}</div>
                <div class="controles"><button class="btn-c" onclick="cant(${p.id},-1)">-</button><span id="q-${p.id}" class="cant-n">0</span><button class="btn-c" onclick="cant(${p.id},1)">+</button></div>`;
                m.appendChild(c);
            });
        });
    }
    render();

    function setT(id, t, p) {
        document.querySelectorAll(`[id^="t-${id}-"]`).forEach(b => b.classList.remove('active'));
        document.getElementById(`t-${id}-${t}`).classList.add('active');
        sel[id] = { t, p };
        calc();
    }

    function cant(id, v) {
        if(!sel[id]) return alert("Por favor elige el tama√±o de la pizza");
        ped[id] = Math.max(0, (ped[id] || 0) + v);
        document.getElementById(`q-${id}`).innerText = ped[id];
        calc();
    }

    function calc() {
        let total = 0;
        for(let id in ped) if(ped[id]) total += sel[id].p * ped[id];
        document.getElementById('total-vista').innerText = `$ ${total.toLocaleString()}`;
    }

    function buscar() {
        const q = document.getElementById('lupa').value.toLowerCase();
        document.querySelectorAll('.card-prod').forEach(c => c.style.display = c.innerText.toLowerCase().includes(q) ? "block" : "none");
    }

    function enviar() {
        const n = document.getElementById('nom').value, d = document.getElementById('dir').value, c = document.getElementById('tel_cli').value, p = document.getElementById('pago').value, o = document.getElementById('obs').value;
        if(!n || !d || !c) return alert("Faltan datos de env√≠o");
        let r = ""; let total = 0;
        for(let id in ped) if(ped[id]) {
            const prod = carta.flatMap(s => s.prods).find(x => x.id == id);
            r += `‚Ä¢ ${ped[id]}x ${prod.n} (${sel[id].t.toUpperCase()})\n`;
            total += sel[id].p * ped[id];
        }
        if(!r) return alert("Selecciona una pizza");
        
        const fecha = new Date().toLocaleString("es-CO", { timeZone: "America/Bogota" });
        navigator.geolocation.getCurrentPosition(pos => {
            const gps = `http://maps.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
            const msg = `*üçï LA PIZZA DE FRANCO - PEDIDO*\nüë§ *CLIENTE:* ${n}\nüè† *DIR:* ${d}\nüìû *CEL:* ${c}\nüí≥ *PAGO:* ${p}\nüìù *OBS:* ${o || "N/A"}\n------------------\nüõí *DETALLE:*\n${r}------------------\nüí∞ *TOTAL: $ ${total.toLocaleString()}*\nüìÖ *HORA:* ${fecha}\nüìç *MAPS:* ${gps}\n\n_VIBRAS POSITIVAS ¬© 2026_`;
            window.open(`https://wa.me/${WA_FRANCO}?text=${encodeURIComponent(msg)}`);
        }, () => alert("Activa el GPS para validar el domicilio"));
    }

    async function check() {
        try {
            const r = await fetch('https://haroldco45.github.io/control-vibras.js');
            const t = await r.text();
            if(t.includes('"la-pizza-de-franco": "suspendido"')) {
                document.getElementById('bloqueo').style.display='block';
                document.getElementById('app-content').style.display='none';
            }
        } catch(e){}
    }
    check();
</script>
</body>
</html>
