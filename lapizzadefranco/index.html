<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Pizza de Franco - Pedidos Online</title>
    <style>
        :root { --rojo: #ce2b37; --verde: #008c45; --blanco: #ffffff; --beige: #fdfaf5; --oscuro: #1a1a1a; --exito: #25D366; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--beige); margin: 0; padding: 10px; padding-bottom: 160px; }
        
        /* Control Invisible */
        #bloqueo { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #fff; z-index: 9999; text-align: center; padding-top: 100px; }

        header { background: var(--rojo); color: white; padding: 20px; text-align: center; border-radius: 0 0 30px 30px; margin: -10px -10px 15px -10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-bottom: 5px solid var(--verde); }
        .logo-pizza { width: 100px; height: 100px; border-radius: 50%; border: 3px solid white; background: white; margin-bottom: 10px; object-fit: contain; }

        .search-input { width: 100%; padding: 15px; border-radius: 50px; border: 2px solid var(--rojo); box-shadow: 0 4px 10px rgba(0,0,0,0.1); outline: none; margin-bottom: 15px; box-sizing: border-box; }

        /* Cajones de Datos Estilo Vibras Positivas */
        .card-datos { background: white; padding: 20px; border-radius: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; border: 2px solid var(--verde); }
        .input-cajon { width: 100%; padding: 15px; margin: 8px 0; border: 1px solid #ddd; border-radius: 15px; font-size: 16px; box-sizing: border-box; background: #fff; outline: none; font-family: inherit; }

        .section-title { font-size: 13px; font-weight: bold; color: var(--rojo); text-transform: uppercase; margin: 20px 0 10px; border-left: 5px solid var(--verde); padding: 8px; background: white; border-radius: 0 10px 10px 0; text-align: left; }
        
        /* Dise√±o de la Carta con 3 Botones de Tama√±o */
        .card-prod { background: white; padding: 15px; border-radius: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 12px; border-bottom: 4px solid var(--rojo); }
        .info-prod h3 { margin: 0; font-size: 16px; color: var(--oscuro); text-transform: uppercase; text-align: left; }
        .info-prod p { margin: 5px 0; font-size: 11px; color: #666; font-style: italic; text-align: left; }
        
        .selector-tamano { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 12px; }
        .btn-tamano { background: #f8f8f8; border: 1px solid #ddd; padding: 10px 2px; border-radius: 12px; font-size: 10px; cursor: pointer; display: flex; flex-direction: column; align-items: center; transition: 0.3s; }
        .btn-tamano.active { background: var(--verde); color: white; border-color: var(--verde); transform: scale(1.05); }
        .btn-tamano b { font-size: 11px; margin-top: 2px; }

        .controles { display: flex; align-items: center; justify-content: center; gap: 20px; margin-top: 15px; border-top: 1px solid #eee; padding-top: 12px; }
        .btn-c { background: var(--oscuro); color: white; border: none; width: 38px; height: 38px; border-radius: 12px; font-weight: bold; font-size: 20px; }
        .cant-n { font-weight: bold; min-width: 30px; text-align: center; color: var(--rojo); font-size: 20px; }
        
        .footer-pedido { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 15px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); border-radius: 25px 25px 0 0; z-index: 1000; }
        .btn-enviar { background: var(--exito); color: white; border: none; padding: 18px; border-radius: 15px; width: 100%; font-size: 18px; font-weight: bold; }
        
        footer { text-align: center; padding: 20px; font-size: 11px; color: #999; }
    </style>
</head>
<body>

<div id="bloqueo"><h1>üîí</h1><h2>SERVICIO SUSPENDIDO</h2><p>Contacte a VIBRAS POSITIVAS</p></div>

<div id="app-content">
    <header>
        <img src="logofranco.PNG" alt="Franco Logo" class="logo-pizza">
        <h1 style="margin:0; font-size: 22px;">LA PIZZA DE FRANCO</h1>
        <small>Carrera 22, Colinas del Portal - Caucasia</small>
    </header>
    
    <input type="text" id="lupa" class="search-input" placeholder="üîç ¬øQu√© pizza quieres probar hoy?..." onkeyup="buscar()">
    
    <div class="card-datos">
        <div class="section-title">üìç Datos para el Domicilio</div>
        <input type="text" id="nom" class="input-cajon" placeholder="üë§ Nombre Completo">
        <input type="text" id="dir" class="input-cajon" placeholder="üè† Carrera 22, Colinas del Portal...">
        <input type="tel" id="tel_cli" class="input-cajon" placeholder="üìû Celular">
        
        <div class="section-title">üí≥ Pago y Notas</div>
        <select id="pago" class="input-cajon">
            <option value="" disabled selected>üí∞ Forma de Pago</option>
            <option value="Efectivo">Efectivo</option>
            <option value="Nequi">Nequi</option>
            <option value="Bancolombia">Bancolombia</option>
        </select>
        <textarea id="obs" class="input-cajon" placeholder="üìù Notas (ej: Sin cebolla, llevar vueltas de 50, etc.)" rows="2"></textarea>
    </div>

    <div id="menu"></div>

    <div class="footer-pedido">
        <div style="display:flex; justify-content:space-between; margin-bottom:12px; font-weight:bold; font-size: 18px;">
            <span>TOTAL:</span><span id="total-vista" style="color: var(--verde);">$ 0</span>
        </div>
        <button class="btn-enviar" onclick="enviar()">üöÄ ENVIAR PEDIDO POR WHATSAPP</button>
    </div>

    <footer><b>ASETEC HM ¬© 2026</b><br>Infraestructura Digital VIBRAS POSITIVAS</footer>
</div>

<script>
    const WA_FRANCO = "573242233812";
    
    async function checkSecurity() {
        try {
            const res = await fetch('https://haroldco45.github.io/control-vibras.js');
            const d = await res.text();
            if(d.includes('"la-pizza-de-franco": "suspendido"')) { 
                document.getElementById('bloqueo').style.display='block';
                document.getElementById('app-content').style.display='none';
            }
        } catch(e){}
    }
    checkSecurity();

    const carta = [
        { cat: "üçï Pizzas Especiales", prods: [
            { id: 1, n: "Carbonara de la Casa", d: "Mozzarella, tocineta, frutos secos y miel", p: { per: 30000, med: 40000, fam: 72000 } },
            { id: 2, n: "Serrano y Champi√±√≥n", d: "Pomodoro, mozzarella, jam√≥n serrano y cherry", p: { per: 34000, med: 44000, fam: 77000 } },
            { id: 3, n: "Franco Especial", d: "La joya de la corona con ingredientes premium", p: { per: 44000, med: 78000, fam: 152000 } }
        ]},
        { cat: "üçï Pizzas Tradicionales", prods: [
            { id: 4, n: "Hawaiana", d: "Jam√≥n y pi√±a calada", p: { per: 36000, med: 47000, fam: 77000 } },
            { id: 5, n: "Pepperonni", d: "Salsa napolitana, mozzarella y pepperoni", p: { per: 34000, med: 46000, fam: 82000 } },
            { id: 6, n: "Napolitana", d: "Mozzarella, tomate y albahaca fresca", p: { per: 22000, med: 32000, fam: 62000 } }
        ]},
        { cat: "ü•ò Lasag√±as y Pastas", prods: [
            { id: 7, n: "Lasag√±a de Pollo", d: "B√©chamel y queso gratinado", p: { per: 32000, med: 36000 } },
            { id: 8, n: "Lasag√±a Mixta", d: "Pollo y carne con extra queso", p: { per: 34000, med: 38000 } }
        ]}
    ];

    let ped = {};
    let seleccionados = {};

    function render() {
        const m = document.getElementById('menu');
        carta.forEach(s => {
            const t = document.createElement('div'); t.className='section-title'; t.innerText=s.cat; m.appendChild(t);
            s.prods.forEach(p => {
                const c = document.createElement('div'); c.className='card-prod';
                let btns = "";
                for (let tam in p.p) {
                    let txt = tam === 'per' ? 'Pers.' : tam === 'med' ? 'Med.' : 'Fam.';
                    btns += `<button class="btn-tamano" id="t-${p.id}-${tam}" onclick="setTam(${p.id}, '${tam}', ${p.p[tam]})">${txt}<b>$${p.p[tam].toLocaleString()}</b></button>`;
                }
                c.innerHTML = `<div class="info-prod"><h3>${p.n}</h3><p>${p.d}</p></div>
                <div class="selector-tamano">${btns}</div>
                <div class="controles">
                    <button class="btn-c" onclick="cant(${p.id},-1)">-</button>
                    <span id="q-${p.id}" class="cant-n">0</span>
                    <button class="btn-c" onclick="cant(${p.id},1)">+</button>
                </div>`;
                m.appendChild(c);
            });
        });
    }
    render();

    function setTam(id, tam, precio) {
        document.querySelectorAll(`[id^="t-${id}-"]`).forEach(b => b.classList.remove('active'));
        document.getElementById(`t-${id}-${tam}`).classList.add('active');
        seleccionados[id] = { tam, precio };
        actualizarTotal();
    }

    function cant(id, v) {
        if(!seleccionados[id]) return alert("Primero selecciona el tama√±o");
        ped[id] = Math.max(0, (ped[id] || 0) + v);
        document.getElementById(`q-${id}`).innerText = ped[id];
        actualizarTotal();
    }

    function actualizarTotal() {
        let t = 0;
        for(let id in ped) { if(ped[id]) t += seleccionados[id].precio * ped[id]; }
        document.getElementById('total-vista').innerText = `$ ${t.toLocaleString()}`;
    }

    function buscar() {
        const q = document.getElementById('lupa').value.toLowerCase();
        document.querySelectorAll('.card-prod').forEach(c => c.style.display = c.innerText.toLowerCase().includes(q) ? "block" : "none");
    }

    function enviar() {
        const n = document.getElementById('nom').value, d = document.getElementById('dir').value, 
              c = document.getElementById('tel_cli').value, p = document.getElementById('pago').value, 
              o = document.getElementById('obs').value;
        if(!n || !d || !c || !p) return alert("Completa los datos de env√≠o y pago.");
        
        let r = ""; let total = 0;
        for(let id in ped) {
            if(ped[id]) {
                const prod = carta.flatMap(s => s.prods).find(x => x.id == id);
                r += `‚Ä¢ ${ped[id]}x ${prod.n} (${seleccionados[id].tam.toUpperCase()})\n`;
                total += seleccionados[id].precio * ped[id];
            }
        }
        if(!r) return alert("Selecciona una pizza.");
        
        const fecha = new Date().toLocaleString("es-CO", { timeZone: "America/Bogota" });
        navigator.geolocation.getCurrentPosition(pos => {
            const gps = `http://maps.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
            const msg = `*üçï LA PIZZA DE FRANCO - PEDIDO*\n------------------\nüë§ *CLIENTE:* ${n}\nüè† *DIR:* ${d}\nüìû *CEL:* ${c}\nüí≥ *PAGO:* ${p}\nüìù *OBS:* ${o || "N/A"}\n------------------\nüõí *DETALLE:*\n${r}------------------\nüí∞ *TOTAL: $ ${total.toLocaleString()}*\nüìÖ *HORA:* ${fecha}\nüìç *MAPS:* ${gps}\n\n_VIBRAS POSITIVAS ¬© 2026_`;
            window.open(`https://wa.me/${WA_FRANCO}?text=${encodeURIComponent(msg)}`);
        }, () => alert("Activa el GPS para validar el domicilio."));
    }
</script>
</body>
</html>
